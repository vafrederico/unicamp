!function(){var a;a=function(a){return new RegExp("^(?:"+a.join("|")+")$","i")},CodeMirror.defineMode("cypher",function(b){var c,d,e,f,g,h,i,j,k,l;return k=function(a){var b,c,e,h;return b=a.next(),c=null,'"'===b||"'"===b?(a.match(/.+?["']/),"string"):/[{}\(\),\.;\[\]]/.test(b)?(c=b,"node"):"/"===b?(a.skipToEnd(),"comment"):g.test(b)?(a.eatWhile(g),null):(a.eatWhile(/[_\w\d]/),a.eat(":")?(a.eatWhile(/[\w\d_\-]/),"atom"):(h=a.current(),e=void 0,d.test(h)?"builtin":i.test(h)?"def":f.test(h)?"keyword":"variable"))},l=function(a){return function(b,c){var d,e;for(e=!1,d=void 0;null!=(d=b.next());){if(d===a&&!e){c.tokenize=k;break}e=!e&&"\\"===d}return"string"}},j=function(a,b,c){return a.context={prev:a.context,indent:a.indent,col:c,type:b}},h=function(a){return a.indent=a.context.indent,a.context=a.context.prev},e=b.indentUnit,c=void 0,d=a(["str","min","labels","max","type","lower","upper","length","type","id","coalesce","head","last","nodes","relationships","extract","filter","tail","range","reduce","abs","round","sqrt","sign","replace","substring","left","right","ltrim","rtrim","trim","collect","distinct"]),i=a(["all","any","none","single","not","in","has","and","or"]),f=a(["start","merge","using","on create","on match","match","index on","drop","where","with","limit","skip","order","by","return","create","delete","set","unique"]),g=/[*+\-<>=&|~]/,{startState:function(){return{tokenize:k,context:null,indent:0,col:0}},token:function(a,b){var d;if(a.sol()&&(b.context&&null==b.context.align&&(b.context.align=!1),b.indent=a.indentation()),a.eatSpace())return null;if(d=b.tokenize(a,b),"comment"!==d&&b.context&&null==b.context.align&&"pattern"!==b.context.type&&(b.context.align=!0),"("===c)j(b,")",a.column());else if("["===c)j(b,"]",a.column());else if("{"===c)j(b,"}",a.column());else if(/[\]\}\)]/.test(c)){for(;b.context&&"pattern"===b.context.type;)h(b);b.context&&c===b.context.type&&h(b)}else"."===c&&b.context&&"pattern"===b.context.type?h(b):/atom|string|variable/.test(d)&&b.context&&(/[\}\]]/.test(b.context.type)?j(b,"pattern",a.column()):"pattern"!==b.context.type||b.context.align||(b.context.align=!0,b.context.col=a.column()));return d},indent:function(a,b){var c,d,f;if(f=b&&b.charAt(0),d=a.context,/[\]\}]/.test(f))for(;d&&"pattern"===d.type;)d=d.prev;return c=d&&f===d.type,d?"keywords"===d.type?newlineAndIndent:d.align?d.col+(c?0:1):d.indent+(c?0:e):0}}}),CodeMirror.modeExtensions.cypher={autoFormatLineBreaks:function(a){var b,c,d;for(c=a.split("\n"),d=/\s+\b(return|where|order by|match|with|skip|limit|create|delete|set)\b\s/g,b=0;b<c.length;)c[b]=c[b].replace(d," \n$1 ").trim(),b++;return c.join("\n")}},CodeMirror.defineMIME("application/x-cypher-query","cypher")}.call(this),function(){"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys=Object.keys||function(a,b,c){c=[];for(b in a)c.hasOwnProperty.call(a,b)&&c.push(b);return c}}.call(this),function(){var a,b;a="",b=""+a+"/db/data",angular.module("neo4jApp.settings",[]).constant("Settings",{cmdchar:":",endpoint:{console:""+a+"/db/manage/server/console",jmx:""+a+"/db/manage/server/jmx/query",rest:b,cypher:""+b+"/cypher",transaction:""+b+"/transaction"},host:a,maxExecutionTime:6e4,maxFrames:50,maxHistory:100,maxNeighbours:100,maxNodes:1e3,maxRows:1e3})}.call(this),function(){"use strict";angular.module("neo4jApp.utils",[]).service("Utils",["$timeout",function(a){return{argv:function(a){var b;return b=a.toLowerCase().split(" "),b||[]},debounce:function(b,c,d){var e,f;return e=void 0,f=null,function(){var g,h,i,j;return i=this,g=arguments,j=function(){return f=null,d?void 0:e=b.apply(i,g)},h=d&&!f,a.cancel(f),f=a(j,c),h&&(e=b.apply(i,g)),e}},parseId:function(a){var b;return null==a&&(a=""),b=a.substr(a.lastIndexOf("/")+1),parseInt(b,10)},stripComments:function(a){var b,c,d,e,f;for(c=a.split("\n"),d=[],e=0,f=c.length;f>e;e++)b=c[e],0!==b.indexOf("//")&&d.push(b);return d.join("\n")}}}])}.call(this),function(){"use strict";var a;angular.module("neo4jApp.controllers",["neo4jApp.utils"]),angular.module("neo4jApp.directives",["ui.bootstrap.dialog"]),angular.module("neo4jApp.filters",[]),angular.module("neo4jApp.services",["LocalStorageModule","neo4jApp.settings","neo4jApp.utils"]),a=angular.module("neo4jApp",["neo4jApp.controllers","neo4jApp.directives","neo4jApp.filters","neo4jApp.services","neo4jApp.animations","ui.bootstrap.dropdownToggle","ui.bootstrap.position","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.tabs","ui.bootstrap.carousel","ui.codemirror","ui.sortable","angularMoment"])}.call(this),function(){angular.module("neo4jApp").config(["$httpProvider",function(a){return a.defaults.headers.common["X-stream"]=!0,a.defaults.headers.common["Content-Type"]="application/json"}])}.call(this),function(){angular.module("neo4jApp").config(["$routeProvider",function(){}])}.call(this),function(){angular.module("neo4jApp").run(["$rootScope","$http","$timeout","Server",function(a,b,c,d){var e,f;return f=null,e=function(){return c.cancel(f),d.status().then(function(){return a.offline=!1,f=c(e,5e3)},function(){return a.offline=!0,f=c(e,5e3)})},e()}])}.call(this),function(){angular.module("neo4jApp").config(["$tooltipProvider",function(a){return a.options({popupDelay:1e3})}])}.call(this),function(){angular.module("neo4jApp").run(["$rootScope","Document","Folder",function(a,b,c){var d,e,f,g,h,i,j,k,l,m;for(f=[{folder:"general",content:"// Get some data\nMATCH (n) RETURN n LIMIT 100"},{folder:"general",content:"// Count nodes\nMATCH (n)\nRETURN count(n)"},{folder:"general",content:"// What is related, and how\nMATCH (a)-[r]->(b)\nRETURN DISTINCT head(labels(a)) AS This, type(r) as To, head(labels(b)) AS That\nLIMIT 100"}],g=[{folder:"nodes",content:"// Count nodes\n// Note: may take a long time.\nMATCH (n)\nRETURN count(n)"},{folder:"nodes",content:"// Create index\n// Replace:\n//   'LabelName' with label to index\n//   'propertyKey' with property to be indexed\nCREATE INDEX ON :LabelName(propertyKey)"},{folder:"nodes",content:"// Create indexed node\n// Replace:\n//   'LabelName' with label to apply to new node\n//   'propertyKey' with property to add\n//   'property_value' with value of the added property\nCREATE (n:LabelName { propertyKey:\"property_value\" }) RETURN n"},{folder:"nodes",content:"// Create node\nCREATE (n) RETURN n"},{folder:"nodes",content:"// Delete a node\n// Replace:\n//   'LabelName' with label of node to delete\n//   'propertyKey' with property to find\n//   'expected_value' with value of property\nSTART n=node(*) \nMATCH (n:LabelName)-[r?]-()\nWHERE n.propertyKey = \"expected_value\"\nDELETE n,r"},{folder:"nodes",content:"// Drop index\n// Replace:\n//   'LabelName' with label index\n//   'propertyKey' with indexed property\nDROP INDEX ON :LabelName(propertyKey)"},{folder:"nodes",content:"// Find a node\nMATCH (n{{':'+label-name}})\nWHERE n.{{property-name}} = \"{{property-value}}\" RETURN n"}],h=[{folder:"relationships",content:"// Isolate node\n// Description: Delete some relationships to a particular node\n// Replace:\n//   'RELATIONSHIP' with relationship type to match (or remove for all)\n//   'propertyKey' with property by which to find the node\n//   'expected_value' with the property value to find\nMATCH (a)-[r:RELATIONSHIP]-()\nWHERE a.propertyKey = \"expected_value\"\nDELETE r"},{folder:"relationships",content:"// Relate nodes\n// Replace:\n//   'propertyKey' with property to evaluate on either node\n//   'expected_value_a' with property value to find node a\n//   'expected_value_b' with property value to find node b\n//   'RELATIONSHP' with type of new relationship between a and b\nMATCH (a),(b)\nWHERE a.propertyKey = \"expected_value_a\"\nAND b.propertyKey = \"expected_value_b\"\nCREATE (a)-[r:RELATIONSHIP]->(b)\nRETURN a,r,b"},{folder:"relationships",content:"// Shortest path\n// Replace:\n//   'propertyKey' with property to evaluate on either node\n//   'expected_value_a' with property value to find node a\n//   'expected_value_b' with property value to find node b\nMATCH p = shortestPath( (a)-[*..4]->(b) )\nWHERE a.propertyKey='expected_value_a' AND b.propertyKey='expected_value_b'\nRETURN p"},{folder:"relationships",content:"// Whats related\n// Description: find a random sample of nodes, revealing how they are related\nMATCH (a)-[r]-(b)\nRETURN DISTINCT head(labels(a)), type(r), head(labels(b)) LIMIT 100"}],i=[{folder:"system",content:"// Is master\n// NOTE: only works in Neo4j Enterprise\n:GET /db/manage/server/ha/master"},{folder:"system",content:"// Is slave\n// NOTE: only works in Neo4j Enterprise\n:GET /db/manage/server/ha/slave"},{folder:"system",content:"// System info\n// Description: gets raw system information\n:GET /db/manage/server/jmx/domain/org.neo4j"}],e=[{id:"general",name:"General",expanded:!0},{id:"system",name:"System",expanded:!1}],0===b.length&&(b.add(f.concat(i)).save(),c.add(e).save()),l=b.all(),m=[],j=0,k=l.length;k>j;j++)d=l[j],d.folder&&(c.get(d.folder)?m.push(void 0):m.push(c.create({id:d.folder})));return m}])}.call(this),function(){angular.module("neo4jApp.services").run(["GraphRenderer","GraphStyle",function(a,b){var c,d,e,f,g,h,i;return g=function(){},e=new a.Renderer({onGraphChange:function(a){var c;return c=a.selectAll("circle.outline").data(function(a){return[a]}),c.enter().append("circle").classed("outline",!0).attr({cx:0,cy:0}),c.attr({r:function(a){return a.radius},fill:function(a){return b.forNode(a).get("color")},stroke:function(a){return b.forNode(a).get("border-color")},"stroke-width":function(a){return b.forNode(a).get("border-width")}}),c.exit().remove()},onTick:g}),d=new a.Renderer({onGraphChange:function(a){var c;return c=a.selectAll("text").data(function(a){return a.caption}),c.enter().append("text").attr({"text-anchor":"middle"}),c.text(function(a){return a.text}).attr("y",function(a){return a.baseline}).attr("font-size",function(a){return b.forNode(a.node).get("font-size")}).attr({fill:function(a){return b.forNode(a.node).get("text-color-internal")}}),c.exit().remove()},onTick:g}),f=new a.Renderer({onGraphChange:function(a){var b;return b=a.selectAll("circle.overlay").data(function(a){return a.selected?[a]:[]}),b.enter().insert("circle",".outline").classed("ring",!0).classed("overlay",!0).attr({cx:0,cy:0,fill:"#f5F6F6",stroke:"rgba(151, 151, 151, 0.2)","stroke-width":"3px"}),b.attr({r:function(a){return a.radius+6}}),b.exit().remove()},onTick:g}),c=new a.Renderer({onGraphChange:function(a){var c;return c=a.selectAll("path").data(function(a){return[a]}),c.enter().append("path"),c.attr("fill",function(a){return b.forRelationship(a).get("color")}).attr("stroke","none"),c.exit().remove()},onTick:function(a){return a.selectAll("path").attr("d",function(a){return a.arrowOutline}).attr("transform",function(a){return"translate("+a.startPoint.x+" "+a.startPoint.y+") rotate("+a.angle+")"})}}),i=new a.Renderer({onGraphChange:function(a){var c;return c=a.selectAll("text").data(function(a){return[a]}),c.enter().append("text").attr({"text-anchor":"middle"}),c.attr("font-size",function(a){return b.forRelationship(a).get("font-size")}).attr("fill",function(a){return b.forRelationship(a).get("text-color-"+a.captionLayout)}),c.exit().remove()},onTick:function(a){return a.selectAll("text").attr("x",function(a){return a.midShaftPoint.x}).attr("y",function(a){return a.midShaftPoint.y+parseFloat(b.forRelationship(a).get("font-size"))/2-1}).attr("transform",function(a){return"rotate("+a.textAngle+" "+a.midShaftPoint.x+" "+a.midShaftPoint.y+")"}).text(function(a){return a.shortCaption})}}),h=new a.Renderer({onGraphChange:function(a){var b,c;return c=a.selectAll("rect").data(function(a){return[a]}),b=20,c.enter().append("rect").classed("overlay",!0).attr("fill","yellow").attr("x",0).attr("y",-b/2).attr("height",b),c.attr("opacity",function(a){return a.selected?.3:0}),c.exit().remove()},onTick:function(a){return a.selectAll("rect").attr("width",function(a){return a.arrowLength>0?a.arrowLength:0}).attr("transform",function(a){return"translate("+a.startPoint.x+" "+a.startPoint.y+") rotate("+a.angle+")"})}}),a.nodeRenderers.push(e),a.nodeRenderers.push(d),a.nodeRenderers.push(f),a.relationshipRenderers.push(c),a.relationshipRenderers.push(i),a.relationshipRenderers.push(h)}])}.call(this),function(){angular.module("neo4jApp").config(["FrameProvider","Settings",function(a,b){var c,d,e,f;return d=b.cmdchar,f=function(a){return null!=a?a.toLowerCase().trim().replace(/\s+/g,"-"):null},c=function(a){var b;return b=a.toLowerCase().split(" "),b||[]},e=function(a,b,c){return null==b&&(b="Error"),{message:a,exception:b,data:c}},a.interpreters.push({type:"clear",matches:""+d+"clear",exec:["$rootScope","Frame",function(a,b){return function(){return b.reset(),!0}}]}),a.interpreters.push({type:"shell",templateUrl:"views/frame-rest.html",matches:""+d+"schema",exec:["Server",function(a){return function(b,c){return a.console(b.substr(1)).then(function(a){var b;return b=a.data[0],b.match("Unknown")?c.reject(e("Unknown action",null,b)):c.resolve(b)}),c.promise}}]}),a.interpreters.push({type:"play",templateUrl:"views/frame-help.html",matches:""+d+"play",exec:["$http",function(a){var b;return b=1,function(b,c){var d,g;return d=f(b.slice("play".length+1))||"learn",g="content/guides/"+d+".html",a.get(g).success(function(){return c.resolve({page:g})}).error(function(){return c.reject(e("No such topic to play"))}),c.promise}}]}),a.interpreters.push({type:"help",templateUrl:"views/frame-help.html",matches:[""+d+"help",""+d+"man"],exec:["$http",function(a){return function(b,c){var d,g;return d=f(b.slice("help".length+1))||"help",g="content/help/"+d+".html",a.get(g).success(function(){return c.resolve({page:g})}).error(function(){return c.reject(e("No such help topic"))}),c.promise}}]}),a.interpreters.push({type:"http",templateUrl:"views/frame-rest.html",matches:[""+d+"get",""+d+"post",""+d+"delete",""+d+"put"],exec:["Server",function(a){return function(b,c){var d,f,g,h,i,j,k;g=/^[^\w]*(get|GET|put|PUT|post|POST|delete|DELETE)\s+(\S+)\s*([\S\s]+)?$/i,h=g.exec(b);try{k=[h[1],h[2],h[3]],j=k[0],i=k[1],d=k[2]}catch(l){return f=l,c.reject(e("Unparseable http request")),c.promise}if(j=null!=j?j.toLowerCase():void 0,!j)return c.reject(e("Invalid verb, expected 'GET, PUT, POST or DELETE'")),c.promise;if(!(null!=i?i.length:void 0)>0)return c.reject(e("Missing path")),c.promise;if("post"===j||"put"===j){if(!d)return c.reject(e("Method needs data")),c.promise;try{d=JSON.parse(d)}catch(l){return f=l,c.reject(e("Payload does not seem to be valid data.")),c.promise}}return"function"==typeof a[j]&&a[j](i,d).then(function(a){return c.resolve(a.data)},function(a){return c.reject(e("Server responded "+a.status))}),c.promise}}]}),a.interpreters.push({type:"cypher",matches:["cypher","start","match","create","drop","return","set","remove","delete","merge"],templateUrl:"views/frame-cypher.html",exec:["Cypher","GraphModel",function(a,c){return function(d,f){return a.transaction().commit(d).then(function(a){return a.size>b.maxRows?f.reject(e("Resultset too large (over "+b.maxRows+" rows)")):f.resolve({table:a,graph:new c(a)})},f.reject),f.promise}}]})}])}.call(this),function(){"use strict";angular.module("neo4jApp.controllers").controller("StreamCtrl",["$scope","$timeout","Document","Frame","motdService",function(a,b,c,d,e){return a.frames=d,a.motd=e}])}.call(this),function(){"use strict";angular.module("neo4jApp.controllers").controller("LayoutCtrl",["$rootScope","$timeout","$dialog","$route","Editor","Frame","GraphStyle","Utils",function(a,b,c,d,e,f,g,h){var i,j,k,l,m;return j=null,k={backdrop:!0,backdropClick:!0,backdropFade:!0,dialogFade:!0,keyboard:!0},a.showDoc=function(){return f.create({input:":play"})},a.showStats=function(){return f.create({input:":schema"})},a.focusEditor=function(){return event.preventDefault(),$("#editor textarea").focus()},a.editorOneLine=!0,a.editorChanged=function(b){return a.editorOneLine=1===b.lineCount(),a.disableHighlighting=":"===b.getValue().trim()[0]},a.isDrawerShown=!1,a.whichDrawer="",a.toggleDrawer=function(b,c){return null==b&&(b=""),null==c&&(c=!a.isDrawerShown||b!==a.whichDrawer),a.isDrawerShown=c,a.whichDrawer=b},a.$watch("isDrawerShown",function(){return b(function(){return a.$emit("layout.changed",0)})}),a.isInspectorShown=!1,a.toggleInspector=function(){return a.isInspectorShown^=!0},a.$watch("selectedGraphItem",h.debounce(function(b){return a.isInspectorShown=!!b},200)),a.isPopupShown=!1,a.togglePopup=function(b){return null!=b?(null!=j?j.isOpen():void 0)||(k.templateUrl="popup-"+b,j=c.dialog(k),j.open().then(function(){return a.popupContent=null,a.isPopupShown=!1})):null!=j&&j.close(),a.popupContent&&j.modalEl.removeClass("modal-"+a.popupContent),b&&j.modalEl.addClass("modal-"+b),a.popupContent=b,a.isPopupShown=!!b},a.globalKey=function(b){return a.isPopupShown&&191!==b.keyCode?void 0:(b.metaKey||b.ctrlKey)&&13===b.keyCode?(b.preventDefault(),e.execCurrent()):b.ctrlKey&&38===b.keyCode?(b.preventDefault(),e.historyPrev()):b.ctrlKey&&40===b.keyCode?(b.preventDefault(),e.historyNext()):27===b.keyCode?a.isPopupShown?a.togglePopup():a.toggleEditor():void 0},m=null,l=function(){return $("#stream").css({"max-height":$(window).height()-$("#editor").height()-40}),a.$emit("layout.changed")},$(window).resize(l),i=function(){return l(),b.cancel(m),m=b(i,500,!1)},i()}])}.call(this),function(){"use strict";angular.module("neo4jApp.directives").directive("keydown",["$parse",function(a){return{restrict:"A",link:function(b,c,d){return c.bind("keydown",function(c){var e;return e=a(d.keydown),b.$apply(function(){return e(b,{$event:c})})})}}}])}.call(this),function(){"use strict";angular.module("neo4jApp.filters").filter("uncomment",function(){return function(a){var b;return null==a?"":function(){var c,d,e,f;for(e=a.split("\n"),f=[],c=0,d=e.length;d>c;c++)b=e[c],0!==b.indexOf("//")&&f.push(b);return f}().join(" ")}})}.call(this),function(){"use strict";angular.module("neo4jApp.filters").filter("autotitle",function(){return function(a){var b;return null==a?"":(b=a.split("\n")[0],0===b.indexOf("//")?b.slice(2):a)}})}.call(this),function(){"use strict";angular.module("neo4jApp.filters").filter("couldBeCommand",function(){return function(a){return null==a?!1:":"===a.charAt(0)?!0:!1}})}.call(this),function(){"use strict";angular.module("neo4jApp.filters").filter("basename",function(){return function(a){return null==a?"":a.replace(/\\/g,"/").replace(/.*\//,"")}})}.call(this),function(){"use strict";angular.module("neo4jApp.filters").filter("dirname",function(){return function(a){return null==a?"":a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}})}.call(this),function(){"use strict";angular.module("neo4jApp.filters").filter("neo4jdoc",function(){return function(a){return null==a?"":a.indexOf("SNAPSHOT")>0?"snapshot":a}})}.call(this),function(){"use strict";angular.module("neo4jApp.filters").filter("humanReadableBytes",[function(){return function(a){var b,c,d,e,f;if(b=+a,!isFinite(b))return"-";if(1024>b)return""+b+" B";for(b/=1024,d=["KiB","MiB","GiB","TiB"],e=0,f=d.length;f>e;e++){if(c=d[e],1024>b)return""+b.toFixed(2)+" "+c;b/=1024}return""+b.toFixed(2)+" PiB"}}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").factory("Cypher",["$q","$rootScope","Server",function(a,b,c){var d,e,f,g,h;return g=function(a){var b;return null==a&&(a=""),b=a.split("/").slice(-2,-1),parseInt(b,10)},d=function(){function a(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;if(this._response=null!=a?a:{},this.nodes=[],this.other=[],this.relationships=[],this.size=0,this.stats={},this.size=(null!=(l=this._response.data)?l.length:void 0)||0,this._response.stats&&this._setStats(this._response.stats),null==(e=this._response).data&&(e.data=[]),null==this._response.data)return this._response;for(m=this._response.data,f=0,i=m.length;i>f;f++){for(d=m[f],n=d.graph.nodes,g=0,j=n.length;j>g;g++)b=n[g],this.nodes.push(b);for(o=d.graph.relationships,h=0,k=o.length;k>h;h++)c=o[h],this.relationships.push(c)}this._response}return a.prototype.response=function(){return this._response},a.prototype.rows=function(){var a,b,c,d,e,f;for(e=this._response.data,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(function(){var c,d,e,f;for(e=b.row,f=[],c=0,d=e.length;d>c;c++)a=e[c],null==a?f.push(null):null!=a.self?f.push(angular.copy(a.data)):f.push(angular.copy(a));return f}());return f},a.prototype.columns=function(){return this._response.columns},a.prototype.isTextOnly=function(){return 0===this.nodes.length&&0===this.relationships.length},a.prototype._setStats=function(a){return this.stats=a,null!=this.stats?a.labels_added>0||a.labels_removed>0?b.$broadcast("db:changed:labels",angular.copy(this.stats)):void 0:void 0},a}(),h=function(b){var c;return c=a.defer(),b.success(function(a){var b,e,f,g,h;if(a){if(a.errors.length>0)return c.reject(a.errors);for(e=[],h=a.results,f=0,g=h.length;g>f;f++)b=h[f],e.push(new d(b));return c.resolve(e[0])}return c.reject()}).error(c.reject),c.promise},f=function(){function b(){this._reset()}return b.prototype._onSuccess=function(){},b.prototype._onError=function(){},b.prototype._reset=function(){return this.id=null},b.prototype.begin=function(b){var d,e,f=this;return e=b?[{statement:b}]:[],d=a.defer(),c.transaction({path:"",statements:e}).success(function(a){return f.id=g(a.data.commit),d.resolve(a)},function(a){return d.reject(a)}),h(d.promise)},b.prototype.execute=function(a){return this.id?h(c.transaction({path:"/"+this.id,statements:[{statement:a}]})):this.begin(a)},b.prototype.commit=function(b){var d,e,f=this;return e=b?[{statement:b}]:[],this.id?(d=a.defer(),c.transaction({path:"/"+this.id+"/commit",statements:e}).success(function(a){return f._reset(),d.resolve(a)},function(a){return d.reject(a)}),h(d.promise)):h(c.transaction({path:"/commit",statements:e}))},b.prototype.rollback=function(){var a=this;return this.id?c.transaction({method:"DELETE",path:"/"+this.id}).success(function(){return a._reset()}):void 0},b}(),e=function(){function b(){}return b.prototype.profile=function(b){var d;return d=a.defer(),c.cypher("?profile=true",{query:b}).success(function(a){return d.resolve(a.plan)}).error(d.reject),d.promise},b.prototype.send=function(a){return this.transaction().commit(a)},b.prototype.transaction=function(){return new f},b}(),window.Cypher=new e}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").factory("Collection",[function(){var a;return a=function(){function a(a,b){this._model=b,this._reset(),null!=a&&this.add(a)}return a.prototype.add=function(a,b){var c,d,e,f;if(null==b&&(b={}),null!=a){for(a=angular.isArray(a)?a:[a],d=[],e=0,f=a.length;f>e;e++)c=a[e],!this._model||c instanceof this._model||(c=new this._model(c)),null==c||this.get(c)||(this._byId[null!=c.id?c.id:c]=c,d.push(c));return d.length&&(angular.isNumber(b.at)?[].splice.apply(this.items,[b.at,0].concat(d)):[].push.apply(this.items,d),this.length+=d.length),this}},a.prototype.all=function(){return this.items},a.prototype.first=function(){return this.items[0]},a.prototype.get=function(a){return null==a?void 0:(a=null!=a.id?a.id:a,this._byId[a])},a.prototype.indexOf=function(a){return this.items.indexOf(a)},a.prototype.last=function(){return this.items[this.length-1]},a.prototype.next=function(a){var b;return b=this.indexOf(a),null!=b?this.items[++b]:void 0},a.prototype.remove=function(a){var b,c,d,e,f;for(d=angular.isArray(a)?a:[a],e=0,f=d.length;f>e;e++)c=d[e],c=this.get(c),c&&(delete this._byId[c.id],b=this.items.indexOf(c),this.items.splice(b,1),this.length--);return a},a.prototype.reset=function(a){return this._reset(),this.add(a)},a.prototype.pluck=function(a){var b,c,d,e,f;if(!angular.isString(a))return void 0;for(e=this.items,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b[a]);return f},a.prototype.prev=function(a){var b;return b=this.indexOf(a),null!=b?this.items[--b]:void 0},a.prototype.where=function(a){var b,c,d,e,f,g,h,i,j;if(f=[],!angular.isObject(a))return f;for(e=Object.keys(a).length,j=this.items,h=0,i=j.length;i>h;h++){b=j[h],d=0;for(c in a)g=a[c],b[c]===g&&d++;e===d&&f.push(b)}return f},a.prototype.save=function(){return this._model||angular.isFunction(this._model.save)?(this._model.save(this.all()),this):void 0},a.prototype.fetch=function(){return this._model||angular.isFunction(this._model.fetch)?(this.reset(this._model.fetch()),this):void 0},a.prototype._reset=function(){return this.items=[],this._byId={},this.length=0},a}()}])}.call(this),function(){"use strict";var a={}.hasOwnProperty;angular.module("neo4jApp.services").factory("GraphModel",["Node","Relationship",function(b,c){var d,e;return d=function(){function d(a){var b,c,d,e,f,g,h,i;for(this.nodeMap={},this.relationshipMap={},h=a.nodes,d=0,f=h.length;f>d;d++)b=h[d],this.addNode(b);for(i=a.relationships,e=0,g=i.length;g>e;e++)c=i[e],this.addRelationship(c)}return d.prototype.nodes=function(){var b,c,d,e;d=this.nodeMap,e=[];for(b in d)a.call(d,b)&&(c=d[b],e.push(c));return e},d.prototype.relationships=function(){var b,c,d,e;d=this.relationshipMap,e=[];for(b in d)a.call(d,b)&&(c=d[b],e.push(c));return e},d.prototype.addNode=function(a){var c,d;return(c=this.nodeMap)[d=a.id]||(c[d]=new b(a.id,a.labels,a.properties))},d.prototype.addRelationship=function(a){var b,d;return b=this.nodeMap[a.startNode]||function(){throw e()}(),d=this.nodeMap[a.endNode]||function(){throw e()}(),this.relationshipMap[a.id]=new c(a.id,b,d,a.type,a.properties)},d.prototype.merge=function(a){var b,c,d,e;for(e=a.nodes,c=0,d=e.length;d>c;c++)b=e[c],this.addNode(b);return this.addRelationships(a.relationships)},d.prototype.addRelationships=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.addRelationship(b));return e},d.prototype.boundingBox=function(){var a,b,c,d;b={x:function(a){return a.x},y:function(a){return a.y}},c={};for(d in b)a=b[d],c[d]={min:Math.min.apply(null,this.nodes().map(function(b){return a(b)-b.radius})),max:Math.max.apply(null,this.nodes().map(function(b){return a(b)+b.radius}))};return c},d}(),e=function(){return new Error("Malformed graph: must add nodes before relationships that connect them")},d}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").factory("Timer",function(){var a,b,c;return c=function(){return(new Date).getTime()},a=function(){function a(){this._start=null,this._end=null}return a.prototype.isRunning=function(){return null!=this._start},a.prototype.start=function(){return null==this._start&&(this._start=c()),this},a.prototype.started=function(){return this._start},a.prototype.stop=function(){return null==this._end&&(this._end=c()),this},a.prototype.stopped=function(){return this._end},a.prototype.time=function(){var a;return null==this._start?0:(a=this._end||c(),a-this._start)},a}(),b=function(){function b(){}var d;return d={},b.prototype["new"]=function(b){return null==b&&(b="default"),d[b]=new a},b.prototype.start=function(a){var b;return null==a&&(a="default"),b=this["new"](a),b.start()},b.prototype.stop=function(a){return null==a&&(a="default"),null==d[a]?void 0:d[a].stop()},b.prototype.currentTime=c,b}(),new b})}.call(this),function(){"use strict";angular.module("neo4jApp.directives").directive("focusOn",["$timeout",function(a){return function(b,c,d){return b.$watch(d.focusOn,function(b){return b?a(function(){return c[0].focus()},0,!1):void 0})}}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").factory("CSV",[function(){var a;return a=function(){function a(a){null==a&&(a={}),this.options=angular.extend(a,{delimiter:","}),this._output="",this._columns=null}return a.prototype.append=function(a){var b,c;if(!angular.isArray(a)&&a.length===(null!=(c=this._columns)?c.length:void 0))throw"CSV: Row must an Array of column size";return this._output+="\n",this._output+=function(){var c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this._escape(b));return e}.call(this).join(this.options.delimiter)},a.prototype.columns=function(a){var b;if(null==a)return this._columns;if(!angular.isArray(a))throw"CSV: Columns must an Array";return this._columns=function(){var c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this._escape(b));return e}.call(this),this._output=this._columns.join(this.options.delimiter)},a.prototype.output=function(){return this._output},a.prototype._escape=function(a){return angular.isString(a)||(a=JSON.stringify(a)),(a.indexOf(this.options.delimiter)>0||a.indexOf('"')>=0)&&(a='"'+a.replace(/"/g,'""')+'"'),a},a}(),{Serializer:a}}])}.call(this),function(){"use strict";angular.module("neo4jApp").directive("resizable",[function(){return{controller:function(){var a,b;return a=[],b=[],this.onStart=function(b){return a.push(b)},this.onStop=function(a){return b.push(a)},this.start=function(b){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(c.call(void 0,b));return f},this.stop=function(){var a,c,d,e;for(e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(a.call(void 0));return e}}}}]).directive("resize",function(){return{require:"^resizable",link:function(a,b,c,d){var e,f;return f=c.resize,e=+b.css(f).slice(0,-2),d.onStart(function(a){return b[0].style[f]=""+(e+a)+"px"}),d.onStop(function(){return e=+b[0].style[f].slice(0,-2)})}}}).directive("resizeChild",function(){return{require:"^resizable",link:function(a,b,c,d){var e,f,g;return c=a.$eval(c.resizeChild),e=Object.keys(c)[0],g=c[e],f=null,d.onStart(function(a){return f||(f=+$(e,b).css(g).slice(0,-2)),$(e,b).css(g,""+(f+a)+"px")}),d.onStop(function(){return f=+b[0].style[g].slice(0,-2)})}}}).directive("handle",function(){return{require:"^resizable",link:function(a,b,c,d){return b.bind("mousedown",function(a){var c,e;return a.preventDefault(),c=e=a.clientY,angular.element(document).bind("mousemove",function(a){var f,g;return f=a.clientY,g=b[0].clientHeight-(e-f),e=f,d.start(e-c)}),angular.element(document).bind("mouseup",function(){return angular.element(document).unbind("mousemove"),angular.element(document).unbind("mouseup"),d.stop()})})}}})}.call(this),function(){"use strict";angular.module("neo4jApp.directives").controller("fileUpload",["$attrs","$parse","$rootScope","$scope","$window",function(a,b,c,d,e){var f,g,h,i=this;return g=function(c){var e;return a.upload?(e=b(a.upload),d.$apply(function(){return e(d,{$content:c})})):void 0},f=function(a){var b;return b=a.originalEvent.dataTransfer.files,b[0]},h=function(a){return function(){return a.apply(d,arguments),d.$apply()}},this.onDragEnter=h(function(a){return f(a),d.active=!0}),this.onDragLeave=h(function(){return d.active=!1}),this.onDrop=h(function(b){var c,e;return i.preventDefault(b),d.active=!1,c=f(b),!c||a.type&&c.type.indexOf(a.type)<0||a.extension&&(e=new RegExp(a.extension+"$"),!c.name.match(e))?void 0:(d.status="Uploading...",i.readFile(c))}),this.preventDefault=function(a){return a.stopPropagation(),a.preventDefault()},this.readFile=function(a){var b;return b=new e.FileReader,b.onerror=h(function(b){return d.status=function(){switch(b.target.error.code){case 1:return""+a.name+" not found.";case 2:return""+a.name+" has changed on disk, please re-try.";case 3:return"Upload cancelled.";case 4:return"Cannot read "+a.name;case 5:return"File too large for browser to upload."}}(),c.$broadcast("fileUpload:error",d.error)}),b.onloadend=h(function(a){var b;return b=a.target.result,b=b.split(";base64,")[1],g(e.atob(b)),d.status=void 0}),b.readAsDataURL(a)}}]),angular.module("neo4jApp.directives").directive("fileUpload",["$window",function(a){return{controller:"fileUpload",restrict:"E",scope:"@",transclude:!0,template:'<div class="file-drop-area" ng-class="{active: active}" ng-transclude>{{status}}</div>',link:function(b,c,d,e){return a.FileReader&&a.atob?(c.bind("dragenter",e.onDragEnter),c.bind("dragleave",e.onDragLeave),c.bind("drop",e.onDrop),c.bind("dragover",e.preventDefault),c.bind("drop")):void 0}}}])}.call(this),function(){"use strict";var a={}.hasOwnProperty;angular.module("neo4jApp.directives").directive("neoTable",[function(){return{replace:!0,restrict:"E",link:function(b,c,d){var e,f,g,h,i;
return g=null,i=b.$watch(d.tableData,function(a){return a?(c.html(h(a)),i()):void 0}),f=function(b){var c,d,f;c="<table class='json-object'><tbody>";for(d in b)a.call(b,d)&&(f=b[d],c+="<tr><th>"+d+"</th><td>"+e(f)+"</td></tr>");return c+="</tbody></table>"},e=function(a){var b;return angular.isString(a)?a:angular.isArray(a)?function(){var c,d,f;for(f=[],c=0,d=a.length;d>c;c++)b=a[c],f.push(e(b));return f}().join(", "):angular.isObject(a)?f(a):JSON.stringify(a)},h=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o;if(g=a.rows(),!g.length)return"";for(d="<table class='table data'>",d+="<thead><tr>",n=a.columns(),h=0,k=n.length;k>h;h++)c=n[h],d+="<th>"+c+"</th>";for(d+="</tr></thead>",d+="<tbody>",o=a.rows(),i=0,l=o.length;l>i;i++){for(f=o[i],d+="<tr>",j=0,m=f.length;m>j;j++)b=f[j],d+="<td>"+e(b)+"</td>";d+="</tr>"}return d+="</tbody>",d+="</table>"}}}}])}.call(this),function(){"use strict";angular.module("neo4jApp.directives").directive("neoGraph",[function(){return{require:"ngController",restrict:"A",link:function(a,b,c,d){var e;return e=a.$watch(c.graphData,function(a){return a?(d.render(a),e()):void 0})}}}])}.call(this),function(){"use strict";var a;a=function(){var a,b;return a=function(a){var c,d,e,f,g;return c=function(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2),Math.pow(a[1]-b[1],2))},d=void 0,f=5,e=void 0,g=null,a.on("mousedown",function(){return d3.event.target.__data__.fixed=!0,d=d3.mouse(document.body),e=+new Date}),a.on("mouseup",function(){return c(d,d3.mouse(document.body))>f?void 0:g?(window.clearTimeout(g),g=null,b.dblclick(d3.event.target.__data__)):g=window.setTimeout(function(a){return function(){return b.click(a.target.__data__),g=null}}(d3.event),250)})},b=d3.dispatch("click","dblclick"),d3.rebind(a,b,"on")},angular.module("neo4jApp.controllers").controller("D3GraphCtrl",["$element","$window","$rootScope","$scope","CircularLayout","GraphExplorer","GraphRenderer","GraphStyle","GraphGeometry",function(b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this;return p=60,m=d3.select(b[0]),m.append("defs"),o=null,w=null,e.style=i.rules,e.$watch("style",function(a){return a?y.update():void 0},!0),u=function(){var a,c,d;return c=b.height(),d=b.width(),a=n.size(),a[0]!==d||a[1]!==c?(n.size([d,c]),n.start()):void 0},v=function(a){return d.selectedGraphItem=a,d.$$phase?void 0:d.$apply()},r=function(a){return a.expanded?void 0:(g.exploreNeighboursWithInternalRelationships(a,o).then(function(){return f.layout(o.nodes(),a,p),a.expanded=!0,y.update()},function(a){return alert(a)}),d.$$phase?void 0:d.$apply())},q=function(a){return a.fixed=!0,x(a)},s=function(a){return x(a)},x=function(a){return a===w?(a.selected=!1,w=null):(null!=w&&(w.selected=!1),a.selected=!0,w=a),y.update(),v(w)},l=a(),l.on("click",q),l.on("dblclick",r),k=function(a,b){var c,d,e,f,g;return f=100,d=60,e=1e3/d,g=angular.isDefined(window.performance)&&angular.isFunction(window.performance.now)?function(){return window.performance.now()}:function(){return Date.now()},c=a.tick,a.tick=function(){var a,d;for(a=g(),d=f;d--&&g()-a<e;)if(c())return f=2,!0;return b(),!1}},t=function(){var a,b,c,d,e,f,g,i,k,l;for(j.onTick(o),a=m.selectAll("g.node").attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),i=h.nodeRenderers,d=0,f=i.length;f>d;d++)c=i[d],a.call(c.onTick);for(b=m.selectAll("g.relationship"),k=h.relationshipRenderers,l=[],e=0,g=k.length;g>e;e++)c=k[e],l.push(b.call(c.onTick));return l},n=d3.layout.force().linkDistance(p).charge(-1e3),k(n,t),this.update=function(){var a,c,e,g,i,k,q,r,t,v,w,x,y,z;if(o){for(g=o.nodes(),q=o.relationships(),i=g.length*p/(2*Math.PI),a={x:b.width()/2,y:b.height()/2},f.layout(g,a,i),n.nodes(g).links(q).start(),u(),d.$on("layout.changed",u),c=m.selectAll("g.layer").data(["relationships","nodes"]),c.enter().append("g").attr("class",function(a){return"layer "+a}),k=m.select("g.layer.relationships").selectAll("g.relationship").data(q,function(a){return a.id}),k.enter().append("g").attr("class","relationship").on("click",s),j.onGraphChange(o),y=h.relationshipRenderers,t=0,w=y.length;w>t;t++)r=y[t],k.call(r.onGraphChange);for(k.exit().remove(),e=m.select("g.layer.nodes").selectAll("g.node").data(g,function(a){return a.id}),e.enter().append("g").attr("class","node").call(n.drag).call(l),z=h.nodeRenderers,v=0,x=z.length;x>v;v++)r=z[v],e.call(r.onGraphChange);return e.exit().remove()}},this.render=function(a){var b=this;return o=a,0!==o.nodes().length?g.internalRelationships(o.nodes()).then(function(a){return o.addRelationships(a.relationships),b.update()}):void 0}}])}.call(this),function(){"use strict";angular.module("neo4jApp").directive("editInPlace",["$parse","$timeout",function(a,b){return{restrict:"A",scope:{value:"=editInPlace",callback:"&onBlur"},replace:!0,template:'<div ng-class=" {editing: editing} " class="edit-in-place"><form ng-submit="save()"><span ng-bind="value" ng-hide="editing"></span><input ng-show="editing" ng-model="value" class="edit-in-place-input"><div ng-click="edit($event)" ng-hide="editing" class="edit-in-place-trigger"></div></form></div>',link:function(c,d){var e;return c.editing=!1,e=d.find("input"),c.edit=function(a){return a.preventDefault(),a.stopPropagation(),c.editing=!0,b(function(){return e.focus()},0,!1)},c.save=function(){var b;return c.editing=!1,c.callback?(b=a(c.callback),b(c)):void 0},e.bind("blur",function(){return c.save(),c.$$phase?void 0:c.$apply()})}}}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").factory("Server",["$http","$q","Settings",function(a,b,c){var d,e,f,g,h;return e={timeout:c.maxExecutionTime},f=function(a,b){var c;return c=new a,b.success(function(a){return angular.isArray(c)?c.push.apply(c,a):angular.extend(c,a)}),c},g=function(a){return f(Array,a)},h=function(a){return f(Object,a)},d=function(){function d(){}return d.prototype["delete"]=function(b,d){return null==b&&(b=""),null==d&&(d=null),0!==b.indexOf(c.host)&&(b=c.host+b),a["delete"](b,e)},d.prototype.get=function(b,d){return null==b&&(b=""),null==d&&(d=null),0!==b.indexOf(c.host)&&(b=c.host+b),a.get(b,e)},d.prototype.post=function(b,d){return null==b&&(b=""),0!==b.indexOf(c.host)&&(b=c.host+b),a.post(b,d,e)},d.prototype.put=function(b,d){return null==b&&(b=""),0!==b.indexOf(c.host)&&(b=c.host+b),a.put(b,d,e)},d.prototype.transaction=function(a){var b,d,e,f,g,h;for(a=angular.extend({path:"",statements:[],method:"post"},a),d=a.path,f=a.statements,b=a.method,d=c.endpoint.transaction+d,b=b.toLowerCase(),g=0,h=f.length;h>g;g++)e=f[g],e.resultDataContents=["row","graph"],e.includeStats=!0;return"function"==typeof this[b]?this[b](d,{statements:f}):void 0},d.prototype.console=function(a,b){return null==b&&(b="shell"),this.post(c.endpoint.console,{command:a,engine:b})},d.prototype.cypher=function(a,b){return null==a&&(a=""),this.post(""+c.endpoint.cypher+a,b)},d.prototype.jmx=function(a){return this.post(c.endpoint.jmx,a)},d.prototype.labels=function(){return g(this.get(c.endpoint.rest+"/labels"))},d.prototype.relationships=function(){return g(this.get(c.endpoint.rest+"/relationship/types"))},d.prototype.propertyKeys=function(){return g(this.get(c.endpoint.rest+"/propertykeys"))},d.prototype.info=function(){return h(this.get(c.endpoint.rest+"/"))},d.prototype.status=function(){return this.get("/db/manage/server/monitor/fetch")},d.prototype.log=function(a){return this.get(a).then(function(a){return console.log(a)})},d.prototype.hasData=function(){var a;return a=b.defer(),this.cypher("?profile=true",{query:"MATCH (n) RETURN ID(n) LIMIT 1"}).success(function(b){return a.resolve(1===b.plan.rows)}).error(a.reject),a.promise},d}(),new d}])}.call(this),function(){"use strict";angular.module("neo4jApp.controllers").controller("MainCtrl",["$rootScope","$window","Server","Settings","motdService",function(a,b,c,d,e){var f,g;return g=function(){return a.labels=c.labels(),a.relationships=c.relationships(),a.propertyKeys=c.propertyKeys(),a.server=c.info(),a.host=b.location.host},a.motd=e,a.neo4j=f={type:"GPLv3",url:"http://www.gnu.org/licenses/gpl.html",edition:"Enterprise",hasData:c.hasData()},a.$on("db:changed:labels",g),a.today=Date.now(),a.cmdchar=d.cmdchar,c.jmx(["org.neo4j:instance=kernel#0,name=Configuration","org.neo4j:instance=kernel#0,name=Kernel","org.neo4j:instance=kernel#0,name=Store file sizes"]).success(function(b){var c,d,e,f,g;for(a.kernel={},g=[],e=0,f=b.length;f>e;e++)d=b[e],g.push(function(){var b,e,f,g;for(f=d.attributes,g=[],b=0,e=f.length;e>b;b++)c=f[b],g.push(a.kernel[c.name]=c.value);return g}());return g}),a.$watch("server",function(b){return a.neo4j.version=b.neo4j_version},!0),g()}])}.call(this),function(){"use strict";var a={}.hasOwnProperty;angular.module("neo4jApp.services").factory("Node",[function(){var b;return b=function(){function b(b,c,d){var e,f;this.id=b,this.labels=c,this.propertyMap=d,this.propertyList=function(){var b;b=[];for(e in d)a.call(d,e)&&(f=d[e],b.push({key:e,value:f}));return b}()}return b.prototype.toJSON=function(){return this.propertyMap},b.prototype.isNode=!0,b.prototype.isRelationship=!1,b}()}])}.call(this),function(){"use strict";var a={}.hasOwnProperty;angular.module("neo4jApp.services").factory("Relationship",[function(){var b;return b=function(){function b(b,c,d,e,f){var g,h;this.id=b,this.source=c,this.target=d,this.type=e,this.propertyMap=f,this.propertyList=function(){var b,c;b=this.propertyMap,c=[];for(g in b)a.call(b,g)&&(h=b[g],c.push({key:g,value:h}));return c}.call(this)}return b.prototype.toJSON=function(){return this.propertyMap},b.prototype.isNode=!1,b.prototype.isRelationship=!0,b}()}])}.call(this),function(){"use strict";angular.module("neo4jApp.controllers").controller("JMXCtrl",["$scope","Server",function(a,b){var c,d;return c=function(a){return a.split("=").pop()},d=function(a){return a.split("/")[0]},b.jmx(["*:*"]).success(function(b){var e,f,g,h,i;for(g={},h=0,i=b.length;i>h;h++)e=b[h],e.name=c(e.name),f=d(e.url),null==g[f]&&(g[f]={}),g[f][e.name]=e;return a.sections=g,a.currentItem=g[f][e.name]}),a.stringify=function(a){return angular.isString(a)?a:JSON.stringify(a,null," ")},a.selectItem=function(b,c){return a.currentItem=a.sections[b][c]},a.simpleValues=function(b){return!a.objectValues(b)},a.objectValues=function(a){return angular.isObject(a.value)}}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").factory("GraphExplorer",["$q","Cypher","Settings",function(a,b,c){return{exploreNeighboursWithInternalRelationships:function(b,d){var e,f=this;return e=a.defer(),this.exploreNeighbours(b).then(function(a){return a.nodes.length>c.maxNeighbours?e.reject("Sorry! Too many neighbours"):(d.merge(a),f.internalRelationships(d.nodes()).then(function(a){return d.addRelationships(a.relationships),e.resolve()}))}),e.promise},exploreNeighbours:function(c){var d;return d=a.defer(),b.transaction().commit("START a = node("+c.id+") MATCH (a)-[r]-() RETURN r;").then(d.resolve),d.promise},internalRelationships:function(c){var d,e;return e=a.defer(),0===c.length?(e.resolve(),e.promise):(d=c.map(function(a){return a.id}),b.transaction().commit("START a = node("+d.join(",")+"), b = node("+d.join(",")+")\nMATCH a -[r]-> b RETURN r;").then(e.resolve),e.promise)}}}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").provider("GraphRenderer",[function(){return this.Renderer=function(){function a(a){null==a&&(a={}),angular.extend(this,a),null==this.onGraphChange&&(this.onGraphChange=function(){}),null==this.onTick&&(this.onTick=function(){})}return a}(),this.nodeRenderers=[],this.relationshipRenderers=[],this.$get=function(){return{nodeRenderers:this.nodeRenderers,relationshipRenderers:this.relationshipRenderers,Renderer:this.Renderer}},this}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").provider("GraphStyle",[function(){var a,b,c,d,e;return e=this,this.defaultStyle={node:{diameter:"40px",color:"#DFE1E3","border-color":"#D4D6D7","border-width":"2px","text-color-internal":"#000000",caption:"{id}","font-size":"10px"},relationship:{color:"#D4D6D7","shaft-width":"1px","font-size":"8px",padding:"3px","text-color-external":"#000000","text-color-internal":"#FFFFFF"}},this.defaultSizes=[{diameter:"10px"},{diameter:"20px"},{diameter:"30px"},{diameter:"50px"},{diameter:"80px"}],this.defaultArrayWidths=[{"shaft-width":"1px"},{"shaft-width":"2px"},{"shaft-width":"3px"},{"shaft-width":"5px"},{"shaft-width":"8px"},{"shaft-width":"13px"},{"shaft-width":"25px"},{"shaft-width":"38px"}],this.defaultColors=[{color:"#DFE1E3","border-color":"#D4D6D7","text-color-internal":"#000000"},{color:"#F25A29","border-color":"#DC4717","text-color-internal":"#FFFFFF"},{color:"#AD62CE","border-color":"#9453B1","text-color-internal":"#FFFFFF"},{color:"#30B6AF","border-color":"#46A39E","text-color-internal":"#FFFFFF"},{color:"#FF6C7C","border-color":"#EB5D6C","text-color-internal":"#FFFFFF"},{color:"#FCC940","border-color":"#F3BA25","text-color-internal":"#000000"},{color:"#4356C0","border-color":"#3445A2","text-color-internal":"#FFFFFF"}],b=function(){function a(a){var b;b=a.indexOf(".")>0?a.split("."):[a,void 0],this.tag=b[0],this.klass=b[1]}return a.prototype.toString=function(){var a;return a=this.tag,null!=this.klass&&(a+="."+this.klass),a},a}(),d=function(){function a(a,b){this.selector=a,this.props=b}return a.prototype.matches=function(a){return this.selector.tag!==a.tag||this.selector.klass!==a.klass&&this.selector.klass?!1:!0},a.prototype.matchesExact=function(a){return this.selector.tag===a.tag&&this.selector.klass===a.klass},a}(),c=function(){function a(a,b){this.data=b,this.selector=a,this.props={}}return a.prototype.applyRules=function(a){var b,c,d,e,f;for(c=0,e=a.length;e>c;c++)if(b=a[c],b.matches(this.selector)){angular.extend(this.props,b.props);break}for(d=0,f=a.length;f>d;d++)if(b=a[d],b.matchesExact(this.selector)){angular.extend(this.props,b.props);break}return this},a.prototype.get=function(a){return this.props[a]||""},a}(),a=function(){function a(a){var b,c;this.storage=a,this.rules=[];try{this.loadRules(null!=(c=this.storage)?c.get("grass"):void 0)}catch(d){b=d}}return a.prototype.selector=function(a){return a.isNode?this.nodeSelector(a):a.isRelationship?this.relationshipSelector(a):void 0},a.prototype.calculateStyle=function(a,b){return new c(a,b).applyRules(this.rules)},a.prototype.forEntity=function(a){return this.calculateStyle(this.selector(a),a)},a.prototype.forNode=function(a){var b,c;return null==a&&(a={}),b=this.nodeSelector(a),(null!=(c=a.labels)?c.length:void 0)>0&&this.setDefaultStyling(b),this.calculateStyle(b,a)},a.prototype.forRelationship=function(a){return this.calculateStyle(this.relationshipSelector(a),a)},a.prototype.findAvailableDefaultColor=function(){var a,b,c,d,f,g,h,i,j;for(c={},i=this.rules,d=0,g=i.length;g>d;d++)b=i[d],null!=b.props.color&&(c[b.props.color]=!0);for(j=e.defaultColors,f=0,h=j.length;h>f;f++)if(a=j[f],null==c[a.color])return a;return e.defaultColors[0]},a.prototype.setDefaultStyling=function(a){var b;return b=this.findRule(a),null==b?(b=new d(a,this.findAvailableDefaultColor()),this.rules.push(b),this.persist()):void 0},a.prototype.change=function(a,b){var c,e;return e=this.selector(a),c=this.findRule(e),null==c&&(c=new d(e,{}),this.rules.push(c)),angular.extend(c.props,b),this.persist(),c},a.prototype.destroyRule=function(a){var b;return b=this.rules.indexOf(a),null!=b&&this.rules.splice(b,1),this.persist()},a.prototype.findRule=function(a){var b,c,d,e,f;for(f=this.rules,d=0,e=f.length;e>d;d++)b=f[d],b.matchesExact(a)&&(c=b);return c},a.prototype.nodeSelector=function(a){var c,d;return null==a&&(a={}),c="node",(null!=(d=a.labels)?d.length:void 0)>0&&(c+="."+a.labels[0]),new b(c)},a.prototype.relationshipSelector=function(a){var c;return null==a&&(a={}),c="relationship",null!=a.type&&(c+="."+a.type),new b(c)},a.prototype.importGrass=function(a){var b,c;try{return c=this.parse(a),this.loadRules(c),this.persist()}catch(d){b=d}},a.prototype.loadRules=function(a){var c,f;angular.isObject(a)||(a=e.defaultStyle),this.rules.length=0;for(f in a)c=a[f],this.rules.push(new d(new b(f),angular.copy(c)));return this},a.prototype.parse=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;for(c=a.split(""),e=!1,d=!1,h="",j="",k={},o=0,q=c.length;q>o;o++){switch(b=c[o],l=!0,b){case"{":e?l=!1:d=!0;break;case"}":e?l=!1:(d=!1,k[h]=j,h="",j="");break;case"'":case'"':e^=!0;break;default:l=!1}l||(d?j+=b:b.match(/[\s\n]/)||(h+=b))}for(f in k)for(m=k[f],k[f]={},s=m.split(";"),p=0,r=s.length;r>p;p++)i=s[p],t=i.split(":"),g=t[0],n=t[1],g&&n&&(k[f][null!=g?g.trim():void 0]=null!=n?n.trim():void 0);return k},a.prototype.persist=function(){var a;return null!=(a=this.storage)?a.add("grass",JSON.stringify(this.toSheet())):void 0},a.prototype.resetToDefault=function(){return this.loadRules(),this.persist()},a.prototype.toSheet=function(){var a,b,c,d,e;for(b={},e=this.rules,c=0,d=e.length;d>c;c++)a=e[c],b[a.selector.toString()]=a.props;return b},a.prototype.toString=function(){var a,b,c,d,e,f,g,h;for(c="",g=this.rules,e=0,f=g.length;f>e;e++){b=g[e],c+=b.selector.toString()+" {\n",h=b.props;for(a in h)d=h[a],"caption"===a&&(d="'"+d+"'"),c+="  "+a+": "+d+";\n";c+="}\n\n"}return c},a.prototype.nextDefaultColor=0,a.prototype.defaultSizes=function(){return e.defaultSizes},a.prototype.defaultArrayWidths=function(){return e.defaultArrayWidths},a.prototype.defaultColors=function(){return angular.copy(e.defaultColors)},a.prototype.interpolate=function(a,b,c){return a.replace(/\{([^{}]*)\}/g,function(a,d){var e;return e=c[d]||b,"string"==typeof e||"number"==typeof e?e:a})},a}(),this.$get=["localStorageService",function(b){return new a(b)}],this}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").service("GraphGeometry",["GraphStyle","TextMeasurement",function(a,b){var c,d,e,f,g,h,i,j;return j=function(a){return a*a},h=function(b){var c,d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(c.radius=parseFloat(a.forNode(c).get("diameter"))/2);return f},d=function(b){var c,d,e,f,g,h,i,j,k,l,m;for(m=[],i=0,k=b.length;k>i;i++){for(f=b[i],g=a.forNode(f).get("caption"),c=a.interpolate(g,f.id,f.propertyMap),h=c.split(" "),e=[],d=j=0,l=h.length-1;l>=0?l>=j:j>=l;d=l>=0?++j:--j)e.push({node:f,text:h[d],baseline:10*(1+d-h.length/2)});m.push(f.caption=e)}return m},f=function(c,d){var e,f,g;return e="sans-serif",f=parseFloat(a.forRelationship(c).get("font-size")),g=parseFloat(a.forRelationship(c).get("padding")),b.measure(d,e,f)+2*g},c=function(b){return parseFloat(a.forRelationship(b).get("shaft-width"))>parseFloat(a.forRelationship(b).get("font-size"))},g=function(a){var b,d,e,g;for(g=[],d=0,e=a.length;e>d;d++)b=a[d],b.captionLength=f(b,b.type),g.push(b.captionLayout=c(b)?"internal":"external");return g},i=function(a,b,c){var d,e;for(d=b;;){if(d.length<=2)return["",0];if(d=d.substr(0,d.length-2)+"",e=f(a,d),c>e)return[d,e]}},e=function(b){var c,d,e,f,g,h,k,l,m,n,o,p,q,r,s;for(s=[],p=0,q=b.length;q>p;p++)l=b[p],d=l.target.x-l.source.x,e=l.target.y-l.source.y,k=Math.sqrt(j(d)+j(e)),l.arrowLength=k-l.source.radius-l.target.radius,c=function(a,b){return{x:a.x+d*b/k,y:a.y+e*b/k}},n=parseFloat(a.forRelationship(l).get("shaft-width"))/2,h=n+3,g=2*h,m=l.arrowLength-g,l.startPoint=c(l.source,l.source.radius),l.endPoint=c(l.target,-l.target.radius),l.midShaftPoint=c(l.startPoint,m/2),l.angle=180*(Math.atan2(e,d)/Math.PI),l.textAngle=l.angle,(l.angle<-90||l.angle>90)&&(l.textAngle+=180),r=m>l.captionLength?[l.type,l.captionLength]:i(l,l.type,m),l.shortCaption=r[0],l.shortCaptionLength=r[1],"external"===l.captionLayout?(o=(m-l.shortCaptionLength)/2,f=m-o,s.push(l.arrowOutline=["M",0,n,"L",o,n,"L",o,-n,"L",0,-n,"Z","M",f,n,"L",m,n,"L",m,h,"L",l.arrowLength,0,"L",m,-h,"L",m,-n,"L",f,-n,"Z"].join(" "))):s.push(l.arrowOutline=["M",0,n,"L",m,n,"L",m,h,"L",l.arrowLength,0,"L",m,-h,"L",m,-n,"L",0,-n,"Z"].join(" "));return s},this.onGraphChange=function(a){return h(a.nodes()),d(a.nodes()),g(a.relationships())},this.onTick=function(a){return e(a.relationships())}}])}.call(this),function(){"use strict";angular.module("neo4jApp").service("TextMeasurement",function(){var a,b;return b=function(a,b){var c,d,e;return d=d3.select("canvas#textMeasurementCanvas").data([this]),d.enter().append("canvas").attr("id","textMeasuringCanvas").style("display","none"),c=d.node(),e=c.getContext("2d"),e.font=b,e.measureText(a).width},a=function(){var a,b,c;return a=1e4,c={},b=[],function(d,e){var f,g;return f=c[d],f?f:(g=e(),b.length>a&&(delete c[b.splice(0,1)],b.push(d)),c[d]=g)}}(),this.measure=function(c,d,e){var f;return f="normal normal normal "+e+"px/normal "+d,a(c+f,function(){return b(c,f)})}})}.call(this),function(){"use strict";angular.module("neo4jApp.services").service("CircularLayout",function(){var a;return a={},a.layout=function(a,b,c){var d,e,f,g,h,i;for(f=a.filter(function(a){return!(null!=a.x&&null!=a.y)}),i=[],d=g=0,h=f.length;h>g;d=++g)e=f[d],e.x=b.x+c*Math.sin(2*Math.PI*d/f.length),i.push(e.y=b.y+c*Math.cos(2*Math.PI*d/f.length));return i},a})}.call(this),function(){"use strict";angular.module("neo4jApp.services").service("CircumferentialDistribution",function(){return this.distribute=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;i=[],v=a.floating;for(g in v)c=v[g],i.push({key:g,angle:c});for(i.sort(function(a,b){return a.angle-b.angle}),n=[],h=function(a,b){return b>a?b-a+1:b+i.length-a+1},c=function(a,b){return b>a?i[b].angle-i[a].angle:360-(i[a].angle-i[b].angle)},o=function(a,d){return c(a,d)<h(a,d)*b},q=function(a){return-1===a?i.length-1:a>=i.length?a-i.length:a},p=function(a){return a>=360?a-360:a},e=function(a,b){if(h(a,b)<i.length){if(o(a,q(b+1)))return e(a,q(b+1));if(o(q(a-1),b))return e(q(a-1),b)}return n.push({start:a,end:b})},f=r=0,w=i.length-2;w>=0?w>=r:r>=w;f=w>=0?++r:--r)o(f,f+1)&&e(f,f+1);for(k={},s=0,u=n.length;u>s;s++)for(l=n[s],d=i[l.start].angle+c(l.start,l.end)/2,m=h(l.start,l.end),f=t=0,x=m-1;x>=0?x>=t:t>=x;f=x>=0?++t:--t)j=d+(f-(m-1)/2)*b,k[i[q(l.start+f)].key]=p(j);y=a.floating;for(g in y)c=y[g],k[g]||(k[g]=a.floating[g]);return k}})}.call(this),function(){"use strict";angular.module("neo4jApp.controllers").controller("InspectorCtrl",["$scope","GraphStyle",function(a,b){return a.sizes=b.defaultSizes(),a.arrowWidths=b.defaultArrayWidths(),a.colors=b.defaultColors(),a.style={color:a.colors[0].color,"border-color":a.colors[0]["border-color"],diameter:a.sizes[0].diameter},a.$watch("selectedGraphItem",function(c){return c?(a.item=c,a.style=b.forEntity(c).props,a.style.caption?a.selectedCaption=a.style.caption.replace(/\{([^{}]*)\}/,"$1"):void 0):void 0}),a.selectSize=function(b){return a.style.diameter=b.diameter,a.saveStyle()},a.selectArrowWidth=function(b){return a.style["shaft-width"]=b["shaft-width"],a.saveStyle()},a.selectScheme=function(b){return a.style.color=b.color,a.style["border-color"]=b["border-color"],a.style["text-color-internal"]=b["text-color-internal"],a.saveStyle()},a.selectCaption=function(b){return a.selectedCaption=b,a.style.caption="{"+b+"}",a.saveStyle()},a.saveStyle=function(){return b.change(a.item,a.style)}}])}.call(this),function(){"use strict";angular.module("neo4jApp.directives").directive("inspector",["$dialog",function(a){return{restrict:"EA",terminal:!0,link:function(b,c,d){var e,f,g;return f={backdrop:!1,dialogClass:"inspector",dialogFade:!0,keyboard:!1,template:c.html(),resolve:{$scope:function(){return b}}},e=a.dialog(f),e.backdropEl.remove(),e.modalEl.css({position:"absolute",top:c.css("top"),right:c.css("right")}),c.remove(),g=d.inspector||d.show,b.$watch(g,function(a){var b;return a?(e.open(),"function"==typeof(b=e.modalEl).draggable?b.draggable({handle:".header"}):void 0):e.isOpen()?e.close():void 0})}}}])}.call(this),function(){"use strict";angular.module("neo4jApp").controller("LegendCtrl",["$scope","GraphStyle",function(a,b){return a.rules=b.rules,a.isNode=function(a){return"node"===a.selector.tag},a.remove=function(a){return b.destroyRule(a)}}])}.call(this),function(){"use strict";angular.module("neo4jApp.controllers").controller("StylePreviewCtrl",["$scope","$window","GraphStyle",function(a,b,c){var d;return d=function(){return a.code=c.toString()},a.rules=c.rules,a.$watch("rules",d,!0),a["import"]=function(a){return c.importGrass(a)},a.reset=function(){return c.resetToDefault()},d()}])}.call(this),function(){"use strict";angular.module("neo4jApp.controllers").controller("CypherResultCtrl",["$scope",function(a){return a.$watch("frame.response",function(){var b;return a.showGraph=null!=(b=a.frame.response)?b.table.nodes.length:void 0,a.tab=a.showGraph?"graph":"table"}),a.setActive=function(b){return a.tab=b},a.isActive=function(b){return b===a.tab},a.resultStatistics=function(a){var b,c,d,e,f,g;return(null!=a?a.response:void 0)?(g=a.response.table.stats,c=[{plural:"constraints",singular:"constraint",verb:"added",field:"constraints_added"},{plural:"constraints",singular:"constraint",verb:"removed",field:"constraints_removed"},{plural:"indexes",singular:"index",verb:"added",field:"indexes_added"},{plural:"indexes",singular:"index",verb:"removed",field:"indexes_removed"},{plural:"labels",singular:"label",verb:"added",field:"labels_added"},{plural:"labels",singular:"label",verb:"removed",field:"labels_removed"},{plural:"nodes",singular:"node",verb:"created",field:"nodes_created"},{plural:"nodes",singular:"node",verb:"deleted",field:"nodes_deleted"},{plural:"properties",singular:"property",verb:"set",field:"properties_set"},{plural:"relationships",singular:"relationship",verb:"deleted",field:"relationship_deleted"},{plural:"relationships",singular:"relationship",verb:"created",field:"relationships_created"}],f=c.filter(function(a){return g[a.field]>0}),e=function(){var a,c,d;for(d=[],a=0,c=f.length;c>a;a++)b=f[a],d.push(""+b.verb+" "+g[b.field]+" "+(1===g[b.field]?b.singular:b.plural));return d}(),e.push("returned "+a.response.table.size+" "+(1===a.response.table.size?"row":"rows")),d=e.join(", "),""+d.substring(0,1).toUpperCase()+d.substring(1)):void 0}}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").factory("motdService",[function(){var a;return a=function(){function a(){this.refresh()}var b;return b={quotes:[{text:"When you label me, you negate me.",author:"Soren Kierkegaard"},{text:"In the beginning was the command line.",author:"Neal Stephenson"},{text:"Remember, all I'm offering is the truth  nothing more.",author:"Morpheus"},{text:"Testing can show the presence of bugs, but never their absence.",author:"Edsger W. Dijkstra"},{text:"We think you're a special snowflake.",author:"Neo4j"},{text:"Still he'd see the matrix in his sleep, bright lattices of logic unfolding across that colorless void.",author:"William Gibson"},{text:"Eventually everything connects.",author:"Charles Eames"},{text:"To develop a complete mind: study the science of art. Study the art of science. Develop your senses - especially learn how to see. Realize that everything connects to everything else.",author:"Leonardo da Vinci"}],tips:["Use <shift-return> for multi-line, <cmd-return> to evaluate command","Navigate history with <ctrl- up/down arrow>","When in doubt, ask for :help"],unrecognizable:["Interesting. How does this make you feel?","Even if I squint, I can't make out what that is. Is it an elephant?","This one time, at bandcamp...","Ineffable, enigmatic, possibly transcendent. Also quite good looking.","I'm not (yet) smart enough to understand this.","Oh I agree. Kaaviot ovat suuria!"],emptiness:["No nodes. Know nodes?","Waiting for the big bang of data.","Ready for anything.","Every graph starts with the first node."],disconnected:["Please check if the cord is unplugged."]},a.prototype.quote="",a.prototype.tip="",a.prototype.unrecognized="",a.prototype.emptiness="",a.prototype.refresh=function(){return this.quote=this.pickRandomlyFrom(b.quotes),this.tip=this.pickRandomlyFrom(b.tips),this.unrecognized=this.pickRandomlyFrom(b.unrecognizable),this.emptiness=this.pickRandomlyFrom(b.emptiness),this.disconnected=this.pickRandomlyFrom(b.disconnected)},a.prototype.pickRandomlyFrom=function(a){return a[Math.floor(Math.random()*a.length)]},a}(),new a}])}.call(this),function(){angular.module("neo4jApp.directives").directive("fancyLogo",["$window",function(){return{template:"<h1>fancified</h1>",link:function(a,b){return b.html(Modernizr.inlinesvg?'<span class="ball one"/><span class="ball two"/><span class="ball three"/>':'<svg viewBox="41 29 125 154" width="125pt" height="154pt"><defs><pattern id="img1" patternUnits="objectBoundingBox" width="90" height="90"><image href="images/faces/abk.jpg" x="0" y="0" width="64" height="64"></image></pattern></defs><g class="logo" stroke="none" stroke-opacity="1" stroke-dasharray="none" fill-opacity="1"><circle class="node" cx="129.63533" cy="84.374286" r="32.365616" fill="#fad000"></circle><circle class="node" cx="62.714058" cy="50.834676" r="18.714163" fill="#fad000"></circle><circle class="node" cx="83.102398" cy="152.22447" r="26.895987" fill="#fad000"></circle><circle class="relationship" cx="91.557016" cy="45.320086" r="5.0627656" fill="#ff4907" stroke="none"></circle><circle class="relationship" cx="104.57301" cy="49.659258" r="5.0627656" fill="#ff4907" stroke="none"></circle><circle class="relationship" cx="55.755746" cy="78.59023" r="5.0627656" fill="#ff4907" stroke="none"></circle><circle class="relationship" cx="55.755746" cy="92.690676" r="5.0627656" fill="#ff4907" stroke="none"></circle><circle class="relationship" cx="58.64808" cy="108.24096" r="5.0627656" fill="#ff4907" stroke="none"></circle><circle class="relationship" cx="65.87916" cy="121.25976" r="5.0627656" fill="#ff4907" stroke="none"></circle><circle class="relationship" cx="118.67652" cy="138.25673" r="5.0627656" fill="#ff4907" stroke="none"></circle><circle class="relationship" cx="127.35707" cy="127.40609" r="5.0627656" fill="#ff4907" stroke="none"></circle><path class="swish" d="M 157.176255 67.359654 C 155.88412 65.2721 154.33242 63.29959 152.52118 61.488342 C 139.88167 48.84871 119.389024 48.84871 106.74953 61.488342 C 94.109954 74.127904 94.109954 94.620657 106.74953 107.260246 C 107.89654 108.40725 109.10819 109.45017 110.37279 110.38901 C 102.64778 97.90879 104.199466 81.316687 115.027814 70.488345 C 126.520325 58.995706 144.50541 57.952786 157.176255 67.35964 Z" fill="#f5aa00"></path><path class="swish" d="M 78.48786 41.29777 C 77.75747 40.117761 76.88036 39.00278 75.856537 37.978957 C 68.711942 30.834292 57.12829 30.834292 49.983703 37.978957 C 42.839068 45.123583 42.839068 56.707297 49.983703 63.85194 C 50.63206 64.500294 51.316958 65.089815 52.031784 65.6205 C 47.665153 58.565944 48.542256 49.187108 54.663076 43.06629 C 61.159322 36.569972 71.325554 35.980452 78.48786 41.297761 Z" fill="#f5aa00"></path><path class="swish" d="M 104.91025 138.61693 C 103.88164 136.955135 102.64641 135.384915 101.20457 133.94307 C 91.142876 123.88128 74.829684 123.88128 64.768004 133.94307 C 54.706255 144.00481 54.706255 160.31808 64.768004 170.37984 C 65.68108 171.29292 66.64562 172.12314 67.652304 172.8705 C 61.502802 162.93561 62.73802 149.727445 71.35794 141.10753 C 80.506564 131.958805 94.82361 131.12859 104.91025 138.61692 Z" fill="#f5aa00"></path><circle class="node-outline" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" fill="none" cx="129.63533" cy="84.374286" r="32.365616" stroke="#eb7f00"></circle><circle class="node-outline" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" fill="none" cx="62.714058" cy="50.834676" r="18.714163" stroke="#eb7f00"></circle><circle class="node-outline" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" fill="none" cx="83.102394" cy="152.22448" r="26.895992" stroke="#eb7f00"></circle></g></svg>')}}}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").factory("Persistable",["localStorageService",function(a){var b;return b=function(){function b(a){null==a&&(a={}),angular.isObject(a)&&angular.extend(this,a),null==this.id&&(this.id=UUID.genV1().toString())}return b.fetch=function(){var b,c,d,e,f;
if(c=function(){try{return a.get(this.storageKey)}catch(b){return null}}.call(this),!angular.isArray(c))return[];for(f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(new this(b));return f},b.save=function(b){return a.add(this.storageKey,JSON.stringify(b))},b}()}])}.call(this),function(){"use strict";var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("neo4jApp.services").factory("Folder",["Collection","Document","Persistable",function(a,c,d){var e,f,g;return e=function(a){function c(a){this.expanded=!0,c.__super__.constructor.call(this,a),null==this.name&&(this.name="Unnamed folder")}return b(c,a),c.storageKey="folders",c.prototype.toJSON=function(){return{id:this.id,name:this.name,expanded:this.expanded}},c}(d),f=function(a){function d(){return g=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.create=function(a){var b;return b=new e(a),this.add(b),this.save(),b},d.prototype.expand=function(a){return a.expanded=!a.expanded,this.save()},d.prototype.klass=e,d.prototype["new"]=function(a){return new e(a)},d.prototype.remove=function(a){var b;return d.__super__.remove.call(this,a),b=c.where({folder:a.id}),c.remove(b),this.save()},d}(a),new f(null,e).fetch()}])}.call(this),function(){"use strict";var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("neo4jApp.services").factory("Document",["Collection","Persistable",function(a,c){var d,e,f;return d=function(a){function c(a){c.__super__.constructor.call(this,a),null==this.name&&(this.name="Unnamed document"),null==this.folder&&(this.folder=!1)}return b(c,a),c.storageKey="documents",c.prototype.toJSON=function(){return{id:this.id,name:this.name,folder:this.folder,content:this.content}},c}(c),e=function(a){function c(){return f=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.create=function(a){var b;return b=new d(a),this.add(b),this.save(),b},c.prototype.klass=d,c.prototype["new"]=function(a){return new d(a)},c.prototype.remove=function(){return c.__super__.remove.apply(this,arguments),this.save()},c}(a),new e(null,d).fetch()}])}.call(this),function(){"use strict";var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};angular.module("neo4jApp.services").provider("Frame",[function(){var a;return a=this,this.interpreters=[],this.$get=["$injector","$q","Collection","Settings","Timer","Utils",function(c,d,e,f,g,h){var i,j,k,l;return i=function(){function a(a){null==a&&(a={}),this.templateUrl=null,angular.isString(a)?this.input=a:angular.extend(this,a),null==this.id&&(this.id=UUID.genV1().toString())}return a.prototype.toJSON=function(){return{id:this.id,input:this.input}},a.prototype.exec=function(){var a,b,e,f,i=this;return e=h.stripComments(this.input.trim()),e&&(a=k.interpreterFor(e))?(this.type=a.type,b=c.invoke(a.exec),this.setProperties(),this.errorText=!1,this.detailedErrorText=!1,this.hasErrors=!1,this.isLoading=!0,this.response=null,this.templateUrl=a.templateUrl,f=g.start(),this.startTime=f.started(),d.when(b(e,d.defer())).then(function(a){return i.isLoading=!1,i.response=a,i.runTime=f.stop().time()},function(a){return null==a&&(a={}),i.isLoading=!1,i.hasErrors=!0,i.response=a.data,i.errorText=a.message||"Unknown error",a.length>0&&a[0].status&&(a[0].status&&(i.errorText=a[0].status),a[0].message&&(i.detailedErrorText=a[0].message)),i.runTime=f.stop().time()}),this):void 0},a.prototype.setProperties=function(){var a;return this.exportable="cypher"===(a=this.type)||"http"===a,this.fullscreenable=!0},a}(),j=function(d){function e(){return l=e.__super__.constructor.apply(this,arguments)}return b(e,d),e.prototype.create=function(a){var b,d,e;if(null==a&&(a={}),a.input){if(d=this.interpreterFor(a.input),!d)return void 0;if(d.templateUrl?b=new i(a):e=c.invoke(d.exec)(),b)for(this.add(b.exec());!(this.length<=f.maxFrames);)this.remove(this.first());return b||e}},e.prototype.interpreterFor=function(b){var c,d,e,f,g,i,j;for(null==b&&(b=""),f=null,b=h.stripComments(b.trim()),c=h.argv(b),j=a.interpreters,g=0,i=j.length;i>g;g++)if(e=j[g],angular.isFunction(e.matches)){if(e.matches(b))return e}else if(d=e.matches,angular.isString(e.matches)&&(d=[d]),angular.isArray(d)&&d.indexOf(c[0])>=0)return e;return f},e.prototype.klass=i,e}(e),k=new j(null,i)}],this}])}.call(this),function(){angular.module("neo4jApp.animations",[]).animation("frame-out",["$window",function(){return{setup:function(a){return a.css({height:a.height()})},start:function(a,b){return a.animate({opacity:0,height:0},{duration:400,easing:"easeInOutCubic",complete:b})}}}]).animation("frame-in",["$window",function(){return{setup:function(a){return a.css({position:"absolute",top:-100,opacity:0})},start:function(a,b){var c;return c=function(){return a.css({position:"relative"}),a.animate({opacity:1,top:0,maxHeight:a.height()},{duration:400,easing:"easeInOutCubic",complete:function(){return a.css({maxHeight:"initial"}),b()}})},a.animate({opacity:.01},200,function(){return c()})}}}]).animation("intro-out",["$window",function(){return{start:function(a,b){return a.animate({opacity:0,top:40},{duration:400,easing:"easeInOutCubic",complete:b})}}}]).animation("intro-in",["$window",function(){return{setup:function(a){return a.css({opacity:0,top:0,display:"block"})},start:function(a,b){return a.animate({opacity:1,top:0},{duration:1600,easing:"easeInOutCubic",complete:b})}}}]).animation("slide-down-out",["$window",function(){return{start:function(a,b){return a.animate({height:0},{duration:400,easing:"easeInOutCubic",complete:b})}}}]).animation("slide-down-in",["$window",function(){return{setup:function(a){return a.css({height:0,display:"block"})},start:function(a,b){return a.animate({height:49},{duration:400,easing:"easeInOutCubic",complete:b})}}}])}.call(this),function(){"use strict";angular.module("neo4jApp.directives").directive("outputRaw",[function(){return{restrict:"A",link:function(a,b,c){var d;return d=a.$watch(c.outputRaw,function(a){return a?(angular.isString(a)||(a=JSON.stringify(a)),b.text(a),d()):void 0})}}}])}.call(this),function(){"use strict";angular.module("neo4jApp.directives").factory("fullscreenService",[function(){var a,b;return b=angular.element("body"),a=angular.element('<div class="fullscreen-container"></div>'),a.hide().appendTo(b),{display:function(b){return a.append(b).show()},hide:function(){return a.hide()}}}]),angular.module("neo4jApp.directives").directive("fullscreen",["fullscreenService",function(a){return{restrict:"A",controller:["$scope",function(a){return a.toggleFullscreen=function(b){return null==b&&(b=!a.fullscreen),a.fullscreen=b}}],link:function(b,c){var d;return d=c.parent(),b.fullscreen=!1,b.$watch("fullscreen",function(e,f){return e!==f?(e?a.display(c):(d.append(c),a.hide()),b.$emit("layout.changed")):void 0})}}}])}.call(this),function(){"use strict";angular.module("neo4jApp.directives").directive("exportable",[function(){return{restrict:"A",controller:["$scope","$window","CSV",function(a,b,c){var d;return d=function(a,c,d){var e;return null==d&&(d="text/csv;charset=utf-8"),e=new Blob([a],{type:d}),b.saveAs(e,c)},a.exportJSON=function(a){return a?d(JSON.stringify(a),"result.json"):void 0},a.exportCSV=function(a){var b,e,f,g,h;if(a){for(b=new c.Serializer,b.columns(a.columns()),h=a.rows(),f=0,g=h.length;g>f;f++)e=h[f],b.append(e);return d(b.output(),"export.csv")}},a.exportGraSS=function(a){return d(a,"graphstyle.grass")}}]}}])}.call(this),function(){"use strict";angular.module("neo4jApp.directives").directive("article",["$rootScope","Editor","Frame",function(a,b){return{restrict:"E",link:function(c,d){return d.on("click",".code",function(c){var d;return d=c.currentTarget.textContent||c.currentTarget.innerText,(null!=d?d.length:void 0)>0?(b.setContent(d.trim()),a.$$phase?void 0:a.$apply()):void 0})}}}])}.call(this),function(){"use strict";angular.module("neo4jApp.directives").directive("helpTopic",["$rootScope","Editor","Frame",function(a,b,c){return{restrict:"A",link:function(b,d,e){var f,g;return g=e.helpTopic,f="help",g?d.on("click",function(b){return b.preventDefault(),g=g.toLowerCase().trim().replace("-"," "),c.create({input:":"+f+" "+g}),a.$$phase?void 0:a.$apply()}):void 0}}}])}.call(this),function(){"use strict";angular.module("neo4jApp.directives").directive("playTopic",["$rootScope","Editor","Frame",function(a,b,c){return{restrict:"A",link:function(b,d,e){var f,g;return g=e.playTopic,f="play",g?d.on("click",function(b){return b.preventDefault(),g=g.toLowerCase().trim().replace("-"," "),c.create({input:":"+f+" "+g}),a.$$phase?void 0:a.$apply()}):void 0}}}])}.call(this),function(){angular.module("LocalStorageModule").value("prefix","neo4j")}.call(this),function(){"use strict";angular.module("neo4jApp.controllers").controller("EditorCtrl",["$scope","Editor","motdService",function(a,b,c){return a.editor=b,a.motd=c,a.star=function(){return b.document||a.toggleDrawer("scripts",!0),b.saveDocument()}}])}.call(this),function(){"use strict";var a={}.hasOwnProperty;angular.module("neo4jApp.controllers").controller("SidebarCtrl",["$scope","Document","Editor","Frame","Folder",function(b,c,d,e,f){var g;return g=function(a){return function(){return a.apply(b,arguments),b.$apply()}},b.showingDrawer=function(a){return b.isDrawerShown&&b.whichDrawer===a},b.removeFolder=function(a){return confirm("Are you sure you want to delete the folder?")?f.remove(a):void 0},b.removeDocument=function(b){var d,e,f;c.remove(b),f=[];for(d in b)a.call(b,d)&&(e=b[d],f.push(b[d]=null));return f},b.importDocument=function(a){return c.create({content:a})},b.playDocument=function(a){return e.create({input:a})},b.sortableOptions={stop:g(function(a,c){var d,e,f,g,h,i;return d=c.item.scope().document,f=null!=c.item.folder?c.item.folder:d.folder,i=Math.abs(c.position.left-c.originalPosition.left),c.item.relocate?(d.folder=f,d.starred=!!f):i>200&&b.documents.remove(d),c.item.resort&&(h=c.item.index(),e=b.documents.where({folder:f})[0],g=b.documents.indexOf(e),0>g&&(g=0),b.documents.remove(d),b.documents.add(d,{at:g+h})),b.documents.save()}),update:function(a,b){return b.item.resort=!0},receive:function(a,b){var c;return b.item.relocate=!0,c=angular.element(a.target).scope().folder,b.item.folder=null!=c?c.id:!1},cursor:"move",dropOnEmpty:!0,connectWith:".droppable",items:"li"},b.editor=d,b.folders=f,b.documents=c}])}.call(this),function(){"use strict";angular.module("neo4jApp.services").service("Editor",["Document","Frame","Settings","localStorageService","motdService",function(a,b,c,d,e){var f,g,h;return h="history",f=function(){function f(){this.history=d.get(h),angular.isArray(this.history)||(this.history=[]),this.content="",this.current="",this.cursor=-1,this.document=null}return f.prototype.execScript=function(a){var c;return this.showMessage=!1,c=b.create({input:a}),c||""===a?this.addToHistory(a):this.setMessage("<b>Unrecognized:</b> <i>"+a+"</i>. "+e.unrecognized,"error")},f.prototype.addToHistory=function(a){if(this.current="",(null!=a?a.length:void 0)>0&&this.history[0]!==a){for(this.history.unshift(a);!(this.history.length<=c.maxHistory);)this.history.pop();d.add(h,JSON.stringify(this.history))}return this.historySet(-1)},f.prototype.execCurrent=function(){return this.execScript(this.content)},f.prototype.focusEditor=function(){return $("#editor textarea").focus()},f.prototype.hasChanged=function(){var a;return(null!=(a=this.document)?a.content:void 0)&&this.document.content.trim()!==this.content.trim()},f.prototype.historyNext=function(){var a;return a=this.cursor,null==a&&(a=this.history.length),a--,this.historySet(a)},f.prototype.historyPrev=function(){var a;return a=this.cursor,null==a&&(a=-1),a++,this.historySet(a)},f.prototype.historySet=function(a){var b;return-1===this.cursor&&-1!==a&&(this.current=this.content),0>a&&(a=-1),a>=this.history.length&&(a=this.history.length-1),this.cursor=a,b=this.history[a]||this.current,this.content=b,this.document=null},f.prototype.loadDocument=function(b){var c;return(c=a.get(b))?(this.content=c.content,this.focusEditor(),this.document=c):void 0},f.prototype.saveDocument=function(){var b,c,d;return(b=this.content.trim())?((null!=(c=this.document)?c.id:void 0)&&(this.document=a.get(this.document.id)),(null!=(d=this.document)?d.id:void 0)?(this.document.content=b,a.save()):this.document=a.create({content:this.content})):void 0},f.prototype.setContent=function(a){return null==a&&(a=""),this.content=a,this.focusEditor(),this.document=null},f.prototype.setMessage=function(a,b){return null==b&&(b="info"),this.showMessage=!0,this.errorCode=b,this.errorMessage=a},f}(),g=new f,CodeMirror.commands.handleEnter=function(a){return 1===a.lineCount()?g.execCurrent():CodeMirror.commands.newlineAndIndent(a)},CodeMirror.commands.handleUp=function(a){return 1===a.lineCount()?g.historyPrev():CodeMirror.commands.goLineUp(a)},CodeMirror.commands.handleDown=function(a){return 1===a.lineCount()?g.historyNext():CodeMirror.commands.goLineDown(a)},CodeMirror.keyMap["default"].Enter="handleEnter",CodeMirror.keyMap["default"]["Shift-Enter"]="newlineAndIndent",CodeMirror.keyMap["default"].Up="handleUp",CodeMirror.keyMap["default"].Down="handleDown",g}])}.call(this),function(){"use strict";angular.module("neo4jApp.filters").filter("commandError",[function(){return function(a){return":"===(null!=a?a.charAt(0):void 0)?"Not-a-command":"Unrecognized"}}])}.call(this),function(){"use strict";angular.module("neo4jApp.directives").directive("clickToCode",["Editor",function(a){return{restrict:"A",link:function(b,c,d){return c.click(function(){var c;return c=b.$eval(d.clickToCode),(null!=c?c.length:void 0)>0?(a.setContent(c.trim()),b.$apply()):void 0})}}}])}.call(this),function(){"use strict";angular.module("neo4jApp.directives").directive("href",["Editor",function(){return{restrict:"A",link:function(a,b,c){return c.href.match(/^http/)?b.attr("target","_blank"):void 0}}}])}.call(this);